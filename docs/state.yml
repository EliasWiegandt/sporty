frontend:
  worker:
    name: sporty
    assets_dir: site
    main: src/worker.js
    staging:
      workers_dev: true
    production:
      route: sporty.plyml.com/*
      zone: plyml.com
    secrets:
      - BACKEND_URL   # e.g. http://127.0.0.1:8000 (dev) or Render URL
      - BACKEND_API_KEY
backend:
  service: sporty-backend (Render)
  entry: app.main:app
  start: uvicorn app.main:app --host 0.0.0.0 --port $PORT
  env:
    - API_KEY        # must match BACKEND_API_KEY
api:
  worker_endpoint: POST /api/submit
  worker_health: GET /api/healthz
  backend_endpoint: POST /recommend
  contract: docs/architecture.md
