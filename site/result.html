<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sporty — Results</title>
  <style>
    :root { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    body { max-width: 720px; margin: 2rem auto; padding: 0 1rem; }
    nav { margin-bottom: 1rem; }
    .card { border: 1px solid #e5e7eb; padding: 1rem; border-radius: .5rem; background: #fff; }
    .help { color: #666; font-size: .95rem; }
    pre { background: #f6f8fa; padding: 1rem; border-radius: .5rem; overflow: auto; }
  </style>
  <meta name="robots" content="noindex" />
  <link rel="icon" href="data:," />
</head>
<body>
  <nav>
    <a href="/">← Home</a>
    &nbsp;·&nbsp;
    <a href="/intake.html">Fill form again</a>
  </nav>

  <h1>Your Result</h1>
  <div id="content"></div>

  <script>
    const el = document.getElementById('content');
    const raw = sessionStorage.getItem('sporty:lastResult');

    if (!raw) {
      el.innerHTML = '<p class="help">No result found. Please submit the form first.</p>' +
                     '<p><a href="/intake.html">Go to intake</a></p>';
    } else {
      let data;
      try { data = JSON.parse(raw); } catch { data = { raw } }

      // If the expected fields exist, show a simple card; otherwise show raw JSON
      if (data && (data.suggested_sport || data.reason || data.ranking)) {
        el.innerHTML = `
          <div class="card">
            <h2 style="margin-top:0">${data.suggested_sport || 'Suggested sport'}</h2>
            <p>${data.reason || ''}</p>
            ${data.ranking !== undefined ? `<p class="help">Ranking: ${data.ranking}</p>` : ''}
          </div>
          <h3>Details</h3>
          <pre>${JSON.stringify(data, null, 2)}</pre>
        `;
      } else {
        el.innerHTML = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
      }
    }
  </script>
</body>
</html>

